{"version":3,"file":"grid.min.js","sources":["grid.js"],"names":["BX","namespace","CRM","Kanban","Grid","options","apply","this","arguments","addCustomEvent","delegate","onBeforeItemCaptured","onBeforeItemRestored","onBeforeItemMoved","onItemMoved","onColumnAddedAsync","onColumnUpdated","onColumnMoved","onColumnRemovedAsync","onColumnLoadAsync","onItemDragStartHandler","onGridRender","onApplyFilter","onApplyFilterCounter","proxy","onPullEventHandlerCrm","onCrmActivityTodoChecked","setInterval","loadNew","loadNewInterval","prototype","__proto__","constructor","accessNotifyDialog","ajaxParams","getAjaxHandlerPath","data","getData","type","isNotEmptyString","ajaxHandlerPath","setAjaxParams","ajax","onsuccess","onfailure","dataType","gridData","sessid","bitrix_sessid","extra","params","entity_type","entityType","version","method","url","accessNotify","Intranet","NotifyDialog","listUserData","notificationHandlerUrl","popupTexts","sendButton","message","title","header","description","setUsersForNotify","admins","show","addStage","column","promise","Promise","targetColumn","getPreviousColumnSibling","targetColumnId","getId","action","columnName","getName","columnColor","getColor","afterColumnId","error","fulfill","Utils","showErrorDialog","fatal","reject","bind","removeStage","columnId","delete","getColumnItems","page","getPagination","getPage","isArray","items","addItemTop","getColumn","columnItems","getItems","length","targetId","incPrice","price","addItem","min_entity_id","lastId","i","item","id","setData","onItemDragStart","setDragMode","DragMode","ITEM","itemColumnData","itemColumnId","getColumnId","itemId","enableDropping","setLastPosition","promises","push","dropEvent","onCustomEvent","isActionAllowed","getItem","drop","getDropZone","parseFloat","decPrice","event","getTargetColumn","beforeItem","skipHandler","handlerData","grid","skip","afterItemId","DropZone","afterItem","getPreviousItemSibling","entity_id","prev_entity_id","status","updateItem","setDataKey","color","afterColumn","filterId","values","filterInstance","fadeOut","autoResolve","columns","getColumns","c","removeColumn","removeItems","loadData","fadeIn","sender","eventArgs","setTimeout","fields","ACTIVITY_COUNTER","filter","Main","filterManager","getById","gridId","api","getApi","setFields","command","COMPLETED","OWNER_TYPE_NAME","OWNER_ID","activityProgress","getDataKey","switchPlanner","activityId","ownerId","ownerTypeId","getGridContainer","columnsWidth","reduce","width","getContainer","offsetWidth","showBorder","getRenderToContainer","classList","console","log"],"mappings":"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"}