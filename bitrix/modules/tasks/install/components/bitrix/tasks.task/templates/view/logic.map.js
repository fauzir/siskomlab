{"version":3,"file":"logic.min.js","sources":["logic.js"],"names":["BX","namespace","Tasks","Component","TaskView","parameters","this","taskId","stageId","parseInt","stages","layout","favorite","switcher","switcherTabs","elapsedTime","createButton","importantButton","stagesWrap","messages","key","message","paths","createButtonMenu","query","Util","Query","bindEvent","proxy","onQueryExecuted","addCustomEvent","window","onTaskEvent","bind","delegate","onChangeProjectLink","initFavorite","initCreateButton","initSwitcher","initViewer","initAjaxErrorHandler","initImportantButton","initStages","fireTaskEvent","temporalCommentFix","prototype","id","id1","obj","type","isNotEmptyString","indexOf","proxy_context","jsonFailure","handler","oEditor","DenyBeforeUnloadHandler","reload","eventTaskUgly","fireGlobalTaskEvent","componentData","EVENT_TYPE","ID","STAY_AT_PAGE","can","TASK","ACTION","EDIT","passCtx","onImportantButtonClick","canChange","SORT","stagesShowed","length","cleanNode","i","c","appendChild","create","props","className","children","TEXT_LAYOUT","attrs","data-stageId","text","TITLE","events","click","setStageHadnler","style","cursor","show","setStage","hide","groupId","data","entityId","entityType","run","then","result","isSuccess","numeric","execute","getStageData","saveStage","STAGE_ID","stage","color","clearAll","calculateTextColor","backgroundColor","borderBottomColor","COLOR","baseColor","defaultColors","r","g","b","util","in_array","toLowerCase","split","join","y","onCreateButtonClick","self","addTask","href","newTask","addTaskByTemplate","onSubMenuShow","subMenuLoaded","autoExec","submenu","getSubMenu","removeMenuItem","add","select","errors","checkHasErrors","tasksTemplateUrlTemplate","subMenu","RESULT","DATA","each","item","k","push","htmlspecialchars","tasksAjaxEmpty","addSubMenu","showSubMenu","tasksAjaxErrorLoad","items","delimiter","addSubTask","newSubTask","listTaskTemplates","taskTemplates","node","priority","newPriority","PRIORITY","toggleClass","PopupMenu","angle","position","offset","task","REAL_STATUS","setStatus","status","statusContainer","statusName","innerHTML","substr","onFavoriteClick","action","hasClass","deleteAll","code","tabs","getElementsByClassName","blocks","parentNode","tab","block","onSwitch","title","a","totalTime","innerText","formatTimeAmount","time","currentTitle","addClass","removeClass","response","fileAreas","area","top","viewElementBind","isElementNode","getAttribute","alert","call"],"mappings":"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"}