BX.namespace("Tasks.KanbanComponent");BX.Tasks.KanbanComponent.ClickSort=function(e,a){var n="desc";if(typeof a.params!=="undefined"&&typeof a.params.order!=="undefined"){n=a.params.order}if(!BX.hasClass(BX(a.layout.item),"menu-popup-item-accept")){var t=a.menuWindow.menuItems;for(var s=0,o=t.length;s<o;s++){BX.removeClass(BX(t[s].layout.item),"menu-popup-item-accept")}BX.addClass(BX(a.layout.item),"menu-popup-item-accept");BX.ajax({method:"POST",dataType:"json",url:ajaxHandlerPath,data:{action:"setNewTaskOrder",order:n,sessid:BX.bitrix_sessid(),params:ajaxParams},onsuccess:function(e){BX.onCustomEvent(this,"onTaskSortChanged",[e])}})}};BX.Tasks.KanbanComponent.SetSort=function(e,a){var n="tasks-popupMenuOptions";var t="popupMenuOptions";var s="webform-button-disable";var o=BX.PopupMenu.getMenuById(t);var p=[];if(o){p=o.menuItems}for(var u=0,r=p.length;u<r;u++){if(p[u].params){if(a===p[u].params.order){BX.addClass(BX(p[u].layout.item),"menu-popup-item-accept")}else{BX.removeClass(BX(p[u].layout.item),"menu-popup-item-accept")}}}if(e){BX.removeClass(BX(n),s)}else{BX.addClass(BX(n),s)}BX.data(BX(n),"disabled",!e)};BX.Tasks.KanbanComponent.onReady=function(){BX.bind(BX("tasks-popupMenuOptions"),"click",BX.delegate(function(){if(BX.data(BX("tasks-popupMenuOptions"),"disabled")===true){var e=new BX.PopupWindow("popupMenuOptionsDisabled",BX("tasks-popupMenuOptions"),{closeByEsc:true,angle:true,offsetLeft:5,darkMode:true,autoHide:true,zIndex:1e3,content:BX.message("TASKS_KANBAN_DIABLE_SORT_TOOLTIP")});e.show()}}));BX.addCustomEvent("onKanbanChanged",BX.delegate(function(e){BX.Tasks.KanbanComponent.SetSort(e.canSortItem,e.newTaskOrder)}))};
//# sourceMappingURL=script.map.js