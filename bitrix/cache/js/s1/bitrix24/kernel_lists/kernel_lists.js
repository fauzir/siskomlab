; /* /bitrix/js/lists/js/autorun_progress_bar.min.js?15113165297374*/
; /* /bitrix/js/lists/js/lists.min.js?15113165297030*/

; /* Start:"a:4:{s:4:"full";s:47:"/bitrix/js/lists/js/lists.min.js?15113165297030";s:6:"source";s:28:"/bitrix/js/lists/js/lists.js";s:3:"min";s:32:"/bitrix/js/lists/js/lists.min.js";s:3:"map";s:32:"/bitrix/js/lists/js/lists.map.js";}"*/
BX.namespace("BX.Lists");BX.Lists=function(){var e=null;var t={};return{ajax:function(e){e.data=e.data||{};e.data["SITE_ID"]=BX.message("SITE_ID");e.data["sessid"]=BX.bitrix_sessid();return BX.ajax(e)},modalWindow:function(o){o=o||{};o.title=o.title||false;o.bindElement=o.bindElement||null;o.overlay=typeof o.overlay=="undefined"?true:o.overlay;o.autoHide=o.autoHide||false;o.closeIcon=typeof o.closeIcon=="undefined"?{right:"20px",top:"10px"}:o.closeIcon;o.modalId=o.modalId||"lists_modal_window_"+(Math.random()*(2e5-100)+100);o.withoutContentWrap=typeof o.withoutContentWrap=="undefined"?false:o.withoutContentWrap;o.contentClassName=o.contentClassName||"";o.contentStyle=o.contentStyle||{};o.content=o.content||[];o.buttons=o.buttons||false;o.events=o.events||{};o.withoutWindowManager=!!o.withoutWindowManager||false;var s=[];if(o.title){s.push(BX.create("div",{props:{className:"bx-lists-popup-title"},text:o.title}))}if(o.withoutContentWrap){s=s.concat(o.content)}else{s.push(BX.create("div",{props:{className:"bx-lists-popup-content "+o.contentClassName},style:o.contentStyle,children:o.content}))}var a=[];if(o.buttons){for(var r in o.buttons){if(!o.buttons.hasOwnProperty(r)){continue}if(r>0){a.push(BX.create("SPAN",{html:"&nbsp;"}))}a.push(o.buttons[r])}s.push(BX.create("div",{props:{className:"bx-lists-popup-buttons"},children:a}))}var n=BX.create("div",{props:{className:"bx-lists-popup-container"},children:s});o.events.onPopupShow=BX.delegate(function(){if(a.length){e=a[0];BX.bind(document,"keydown",BX.proxy(this._keyPress,this))}if(o.events.onPopupShow)BX.delegate(o.events.onPopupShow,BX.proxy_context)},this);var i=o.events.onPopupClose;o.events.onPopupClose=BX.delegate(function(){e=null;try{BX.unbind(document,"keydown",BX.proxy(this._keypress,this))}catch(s){}if(i){BX.delegate(i,BX.proxy_context)()}if(o.withoutWindowManager){delete t[o.modalId]}BX.proxy_context.destroy()},this);var l;if(o.withoutWindowManager){if(!!t[o.modalId]){return t[o.modalId]}l=new BX.PopupWindow(o.modalId,o.bindElement,{content:n,closeByEsc:true,closeIcon:o.closeIcon,autoHide:o.autoHide,overlay:o.overlay,events:o.events,buttons:[],zIndex:isNaN(o["zIndex"])?0:o.zIndex});t[o.modalId]=l}else{l=BX.PopupWindowManager.create(o.modalId,o.bindElement,{content:n,closeByEsc:true,closeIcon:o.closeIcon,autoHide:o.autoHide,overlay:o.overlay,events:o.events,buttons:[],zIndex:isNaN(o["zIndex"])?0:o.zIndex})}l.show();return l},removeElement:function(e){return e.parentNode?e.parentNode.removeChild(e):e},addToLinkParam:function(e,t,o){if(!e.length){return"?"+t+"="+o}e=BX.util.remove_url_param(e,t);if(e.indexOf("?")!=-1){return e+"&"+t+"="+o}return e+"?"+t+"="+o},getFirstErrorFromResponse:function(e){e=e||{};if(!e.errors)return"";return e.errors.shift().message},showModalWithStatusAction:function(e,t){e=e||{};if(!e.message){if(e.status=="success"){e.message=BX.message("LISTS_ASSETS_JS_STATUS_ACTION_SUCCESS")}else{e.message=BX.message("LISTS_ASSETS_JS_STATUS_ACTION_ERROR")+". "+this.getFirstErrorFromResponse(e)}}var o=BX.create("div",{props:{className:"bx-lists-alert"},children:[BX.create("span",{props:{className:"bx-lists-aligner"}}),BX.create("span",{props:{className:"bx-lists-alert-text"},text:e.message}),BX.create("div",{props:{className:"bx-lists-alert-footer"}})]});var s=BX.PopupWindowManager.getCurrentPopup();if(s){s.destroy()}var a=setTimeout(function(){var e=BX.PopupWindowManager.getCurrentPopup();if(!e||e.uniquePopupId!="bx-lists-status-action"){return}e.close();e.destroy()},3500);var r=BX.PopupWindowManager.create("bx-lists-status-action",null,{content:o,onPopupClose:function(){this.destroy();clearTimeout(a)},autoHide:true,zIndex:2e3,className:"bx-lists-alert-popup"});r.show();BX("bx-lists-status-action").onmouseover=function(e){clearTimeout(a)};BX("bx-lists-status-action").onmouseout=function(e){a=setTimeout(function(){var e=BX.PopupWindowManager.getCurrentPopup();if(!e||e.uniquePopupId!="bx-lists-status-action"){return}e.close();e.destroy()},3500)}},addNewTableRow:function(e,t,o,s){var a=document.getElementById(e);var r=a.rows.length;var n=a.insertRow(r);var i=0;for(i=0;i<t;i++){var l=n.insertCell(i);var c=a.rows[r-1].cells[i].innerHTML;c=c.replace(o,function(e){return e.replace("[n"+arguments[s]+"]","[n"+(1+parseInt(arguments[s]))+"]")});var d={html:c};BX.onCustomEvent(window,"onAddNewRowBeforeInner",[d]);c=d.html;l.innerHTML=c;var u=BX.processHTML(c);BX.ajax.processScripts(u.SCRIPT)}},createAdditionalHtmlEditor:function(e,t,o){var s=document.getElementById(e);var a=s.rows.length;var r=s.insertRow(a);var n=r.insertCell(0);var i=s.rows[a-1].cells[0].innerHTML;var l=0,c,d,u;while(true){c=i.indexOf("[n",l);if(c<0)break;d=i.indexOf("]",c);if(d<0)break;u=parseInt(i.substr(c+2,d-c));i=i.substr(0,c)+"[n"+ ++u+"]"+i.substr(d+1);l=c+1}l=0;while(true){c=i.indexOf("__n",l);if(c<0)break;d=i.indexOf("_",c+2);if(d<0)break;u=parseInt(i.substr(c+3,d-c));i=i.substr(0,c)+"__n"+ ++u+"_"+i.substr(d+1);l=d+1}n.innerHTML=i;var p="id_"+t+"__n"+a+"_";var m=t+"[n"+a+"][VALUE]";window.BXHtmlEditor.Show({id:p,inputName:m,name:m,content:"",width:"100%",height:"200",allowPhp:false,limitPhpAccess:false,templates:[],templateId:"",templateParams:[],componentFilter:"",snippets:[],placeholder:"Text here...",actionUrl:"/bitrix/tools/html_editor_action.php",cssIframePath:"/bitrix/js/fileman/html_editor/iframe-style.css?1412693817",bodyClass:"",bodyId:"",spellcheck_path:"/bitrix/js/fileman/html_editor/html-spell.js?v=1412693817",usePspell:"N",useCustomSpell:"Y",bbCode:false,askBeforeUnloadPage:false,settingsKey:"user_settings_1",showComponents:true,showSnippets:true,view:"wysiwyg",splitVertical:false,splitRatio:"1",taskbarShown:false,taskbarWidth:"250",lastSpecialchars:false,cleanEmptySpans:true,lazyLoad:false,showTaskbars:false,showNodeNavi:false,controlsMap:[{id:"Bold",compact:true,sort:"80"},{id:"Italic",compact:true,sort:"90"},{id:"Underline",compact:true,sort:"100"},{id:"Strikeout",compact:true,sort:"110"},{id:"RemoveFormat",compact:true,sort:"120"},{id:"Color",compact:true,sort:"130"},{id:"FontSelector",compact:false,sort:"135"},{id:"FontSize",compact:false,sort:"140"},{separator:true,compact:false,sort:"145"},{id:"OrderedList",compact:true,sort:"150"},{id:"UnorderedList",compact:true,sort:"160"},{id:"AlignList",compact:false,sort:"190"},{separator:true,compact:false,sort:"200"},{id:"InsertLink",compact:true,sort:"210"},{id:"InsertImage",compact:false,sort:"220"},{id:"InsertVideo",compact:true,sort:"230"},{id:"InsertTable",compact:false,sort:"250"},{id:"Smile",compact:false,sort:"280"},{separator:true,compact:false,sort:"290"},{id:"Fullscreen",compact:false,sort:"310"},{id:"More",compact:true,sort:"400"}],autoResize:true,autoResizeOffset:"40",minBodyWidth:"350",normalBodyWidth:"555"});var f=BX.findChildrenByClassName(BX(e),"bx-html-editor");for(var h in f){var v=f[h].getAttribute("id");var w=BX.findChildrenByClassName(BX(v),"bx-editor-iframe");if(w.length>1){for(var b=0;b<w.length-1;b++){w[b].parentNode.removeChild(w[b])}}}}}}();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/lists/js/autorun_progress_bar.min.js?15113165297374";s:6:"source";s:43:"/bitrix/js/lists/js/autorun_progress_bar.js";s:3:"min";s:47:"/bitrix/js/lists/js/autorun_progress_bar.min.js";s:3:"map";s:47:"/bitrix/js/lists/js/autorun_progress_bar.map.js";}"*/
BX.namespace("BX.Lists");if(typeof BX.Lists.AutoRunProcessState=="undefined"){BX.Lists.AutoRunProcessState={intermediate:0,running:1,completed:2,stoped:3,error:4}}if(typeof BX.Lists.AutorunProcessManager!="undefined"){}else{BX.Lists.AutorunProcessManager=function(){this._id="";this._settings={};this._serviceUrl="";this._dataForAjax=null;this._container=null;this._panel=null;this._hasLayout=false;this._state=BX.Lists.AutoRunProcessState.intermediate;this._processedItemCount=0;this._totalItemCount=0;this._error=""};BX.Lists.AutorunProcessManager.prototype={initialize:function(t,s){this._id=BX.type.isNotEmptyString(t)?t:"lists_lrp_mgr_"+Math.random().toString().substring(2);this._settings=s?s:{};this._serviceUrl=this.getSetting("serviceUrl","");if(!BX.type.isNotEmptyString(this._serviceUrl)){throw"AutorunProcessManager. Could not find 'serviceUrl' parameter in settings."}this._ajaxAction=this.getSetting("ajaxAction","");if(!BX.type.isNotEmptyString(this._ajaxAction)){throw"AutorunProcessManager. Could not find 'ajaxAction' parameter in settings."}this._dataForAjax=this.getSetting("dataForAjax","");this._container=BX(this.getSetting("container"));if(!BX.type.isElementNode(this._container)){throw"AutorunProcessManager: Could not find container."}if(!!this.getSetting("enableLayout",false)){this.layout()}},getId:function(){return this._id},getSetting:function(t,s){return this._settings.hasOwnProperty(t)?this._settings[t]:s},getMessage:function(t){var s=BX.Lists.AutorunProcessManager.messages;return s.hasOwnProperty(t)?s[t]:t},isHidden:function(){return!this._hasLayout||this._panel.isHidden()},show:function(){if(this._hasLayout){this._panel.show()}},hide:function(){if(this._hasLayout){this._panel.hide()}},layout:function(){if(this._hasLayout){return}if(!this._panel){this._panel=BX.Lists.AutorunProcessPanel.create(this._id,{manager:this,container:this._container,title:this.getMessage("title"),stateTemplate:this.getMessage("stateTemplate")})}this._panel.layout();this._hasLayout=true},clearLayout:function(){if(!this._hasLayout){return}this._panel.clearLayout();this._hasLayout=false},refresh:function(){if(!this._hasLayout){this.layout()}if(this._panel.isHidden()){this._panel.show()}this._panel.onManagerStateChange()},getState:function(){return this._state},getProcessedItemCount:function(){return this._processedItemCount},getTotalItemCount:function(){return this._totalItemCount},getError:function(){return this._error},run:function(){this.startRequest()},runAfter:function(t){window.setTimeout(BX.delegate(this.run,this),t)},startRequest:function(){if(this._requestIsRunning){return}this._requestIsRunning=true;this._state=BX.Lists.AutoRunProcessState.running;var t={};if(this._dataForAjax){t=this._dataForAjax}BX.Lists.ajax({url:BX.Lists.addToLinkParam(this._serviceUrl,"action",this._ajaxAction),method:"POST",dataType:"json",data:t,onsuccess:BX.delegate(this.onRequestSuccsess,this),onfailure:BX.delegate(this.onRequestFailure,this)})},onRequestSuccsess:function(t){this._requestIsRunning=false;var s=BX.type.isNotEmptyString(t["status"])?t["status"]:"";if(s==="error"){this._state=BX.Lists.AutoRunProcessState.error}else if(s==="completed"){this._state=BX.Lists.AutoRunProcessState.completed}if(this._state===BX.Lists.AutoRunProcessState.error){this._error=BX.type.isNotEmptyString(t["error"])?t["error"]:this.getMessage("requestError")}else{this._processedItemCount=t["processedItems"]?parseInt(t["processedItems"]):0;this._totalItemCount=t["totalItems"]?parseInt(t["totalItems"]):0}if(this._state===BX.Lists.AutoRunProcessState.completed){this.hide()}else{this.refresh();if(this._state===BX.Lists.AutoRunProcessState.running){window.setTimeout(BX.delegate(this.startRequest,this),4e3)}}BX.onCustomEvent(this,"ON_AUTORUN_PROCESS_STATE_CHANGE",[this])},onRequestFailure:function(t){this._requestIsRunning=false;this._state=BX.Lists.AutoRunProcessState.error;this._error=this.getMessage("requestError");this.refresh();BX.onCustomEvent(this,"ON_AUTORUN_PROCESS_STATE_CHANGE",[this])}};if(typeof BX.Lists.AutorunProcessManager.messages=="undefined"){BX.Lists.AutorunProcessManager.messages={}}BX.Lists.AutorunProcessManager.items={};BX.Lists.AutorunProcessManager.create=function(t,s){var e=new BX.Lists.AutorunProcessManager;e.initialize(t,s);this.items[e.getId()]=e;return e}}if(typeof BX.Lists.AutorunProcessPanel=="undefined"){BX.Lists.AutorunProcessPanel=function(){this._id="";this._settings={};this._manager=null;this._container=null;this._wrapper=null;this._stateNode=null;this._progressNode=null;this._hasLayout=false;this._isHidden=false};BX.Lists.AutorunProcessPanel.prototype={initialize:function(t,s){this._id=t;this._settings=s?s:{};this._container=BX(this.getSetting("container"));if(!BX.type.isElementNode(this._container)){throw"AutorunProcessPanel: Could not find container."}this._manager=this.getSetting("manager");if(!this._manager){throw"AutorunProcessPanel: Could not find manager."}this._isHidden=this.getSetting("isHidden",false)},getId:function(){return this._id},getSetting:function(t,s){return this._settings.hasOwnProperty(t)?this._settings[t]:s},layout:function(){if(this._hasLayout){return}this._wrapper=BX.create("DIV",{attrs:{className:"lists-view-progress"}});BX.addClass(this._wrapper,this._isHidden?"lists-view-progress-hide":"lists-view-progress-show");this._container.appendChild(this._wrapper);this._wrapper.appendChild(BX.create("DIV",{attrs:{className:"lists-view-progress-info"},text:this.getSetting("title","Please wait...")}));this._progressNode=BX.create("DIV",{attrs:{className:"lists-view-progress-bar-line"}});this._stateNode=BX.create("DIV",{attrs:{className:"lists-view-progress-steps"}});this._wrapper.appendChild(BX.create("DIV",{attrs:{className:"lists-view-progress-inner"},children:[BX.create("DIV",{attrs:{className:"lists-view-progress-bar"},children:[this._progressNode]}),this._stateNode]}));this._hasLayout=true},isHidden:function(){return this._isHidden},show:function(){if(!this._isHidden){return}if(!this._hasLayout){return}BX.removeClass(this._wrapper,"lists-view-progress-hide");BX.addClass(this._wrapper,"lists-view-progress-show");this._isHidden=false},hide:function(){if(this._isHidden){return}if(!this._hasLayout){return}BX.removeClass(this._wrapper,"lists-view-progress-show");BX.addClass(this._wrapper,"lists-view-progress-hide");this._isHidden=true},clearLayout:function(){if(!this._hasLayout){return}BX.remove(this._wrapper);this._wrapper=this._stateNode=null;this._hasLayout=false},onManagerStateChange:function(){if(!this._hasLayout){return}var t=this._manager.getState();if(t!==BX.Lists.AutoRunProcessState.error){var s=this._manager.getProcessedItemCount();var e=this._manager.getTotalItemCount();var i=0;if(e!==0){i=Math.floor(s/e*100);var r=i%5;if(r!==0){i-=r}}this._stateNode.innerHTML=s>0&&e>0?this.getSetting("stateTemplate","#processed# from #total#").replace("#processed#",s).replace("#total#",e):"";this._progressNode.className="lists-view-progress-bar-line";if(i>0){this._progressNode.className+=" lists-view-progress-line-"+i.toString()}}}};BX.Lists.AutorunProcessPanel.items={};BX.Lists.AutorunProcessPanel.isExists=function(t){return this.items.hasOwnProperty(t)};BX.Lists.AutorunProcessPanel.create=function(t,s){var e=new BX.Lists.AutorunProcessPanel;e.initialize(t,s);this.items[e.getId()]=e;return e}}
/* End */
;
//# sourceMappingURL=kernel_lists.map.js