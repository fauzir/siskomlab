{"version":3,"file":"script.min.js","sources":["script.js"],"names":["AJAX_URL","lastInstance","CallListActivity","config","this","node","callListId","webformId","webformSecCode","allowEdit","gridId","lastGridUrl","enableSavePopup","tabs","_itemsState","_handleTabHeaderClickEvent","_handleTabHeaderClick","bind","init","externalRequests","create","getLast","prototype","self","getNode","setActiveTab","tabHeader","tabNodes","BX","findChildrenByClassName","type","isArray","forEach","tabNode","push","dataset","bindEvents","addCustomEvent","window","gridData","requestParams","url","util","add_url_param","sessid","bitrix_sessid","ajax_action","_OnExternalEvent","reInit","findChildren","className","createFromLeads","_handleCreateFromClick","createFromContacts","createFromCompanies","createFromDeals","createFromQuotes","createFromInvoices","addMore","_handleAddMore","callButton","document","e","BXIM","dialogId","CrmActivityProvider","dialogs","hasOwnProperty","close","FoldedCallView","getInstance","destroy","startCallList","openFilterButton","_handleOpenFilterClick","planner","Crm","Activity","Planner","Manager","_onAfterActivitySave","_onPlannerClose","name","scope","querySelector","getNodeValue","value","getTab","getTabHeader","tabName","tab","removeClass","addClass","showItemsGrid","gridContainer","_loadItemsGrid","pageHtml","innerHTML","successCallback","params","ajax","method","dataType","data","onsuccess","HTML","_reloadLayout","subject","description","outerHTML","target","response","SUCCESS","DATA","LIST_URL","open","context","_generateExternalContext","listUrl","call_list_context","call_list_id","isPlainObject","key","grid","getGrid","reloadGrid","activityFields","NEW","popup","PopupWindow","autoHide","overlay","lightShadow","closeIcon","closeByEsc","contentColor","titleBar","message","content","props","text","buttons","PopupWindowButton","events","click","VIEW_URL","onPopupClose","show","Main","gridManager","deleteItems","items","deleteSelected","selectedIds","getRows","getSelectedIds","gridHandle","getById","instance","reload","_getRandomString","len","charSet","randomString","i","randomPoz","Math","floor","random","length","substring"],"mappings":"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"}