{"version":3,"file":"form_loader.min.js","sources":["form_loader.js"],"names":["Bitrix24FormLoader","init","this","yaId","forms","eventHandlers","frameHeight","defaultNodeId","window","Bitrix24FormObject","forEach","preLoad","params","_this","type","defaultNode","document","getElementById","defaultClickClassNodeList","getElementsByClassName","id","click","length","i","push","item","nextElementSibling","Object","prototype","toString","call","formInstance","isFormExisted","getUniqueLoadId","buttonNode","addEventListener","showPopup","setTimeout","delay","load","createPopup","popup","createElement","innerHTML","children","node","querySelector","btn","hidePopup","body","insertBefore","appendChild","styleFixNode","setAttribute","createTextNode","head","resizePopup","addEventHandler","form","keyCode","e","kc","which","interfaceMagic","windowHeight","Math","min","scrollHeight","documentElement","offsetHeight","clientHeight","popupHeight","needScroll","style","height","width","scrollWidth","offsetWidth","clientWidth","util","isIOS","addClass","display","removeClass","element","className","indexOf","replace","hasClass","classList","nodeListToArray","filtered","filter","name","test","navigator","userAgent","isMobile","createFrame","formUrl","page","domain","frame","frameName","locationHash","location","protocol","host","from","href","fields","options","presets","frameSrc","lang","sec","Date","encodeURIComponent","JSON","stringify","handlers","execEventHandler","uniqueLoadId","ref","match","iframe","parentNode","onFrameLoad","event","origin","doFrameAction","data","unload","removeChild","dataString","parse","err","action","value","setFrameHeight","parseInt","eventName","dataLayer","virtualPageURL","eventCategory","eventAction","ga","isGaExists","getAll","tracker","get","gaId","Ya","Metrika","counters","reachGoal","checkHash","hash","substring","ie","postMessage","frameParameters","contentWindow","el","handler","attachEvent","target","eventHandler","apply"],"mappings":"AAAA,GAAIA,qBAEHC,KAAM,WAELC,KAAKC,KAAO,IACZD,MAAKE,QACLF,MAAKG,gBACLH,MAAKI,YAAc,KACnBJ,MAAKK,cAAgB,YAErB,KAAIC,OAAOC,qBAAuBD,OAAOA,OAAOC,oBAC/C,MACD,KAAID,OAAOA,OAAOC,oBAAoBL,MACrC,MAEDI,QAAOA,OAAOC,oBAAoBL,MAAMM,QAAQR,KAAKS,QAAST,OAE/DS,QAAS,SAASC,GAEjB,GAAIC,GAAQX,IACZ,QAAOU,EAAOE,MAEb,IAAK,QACL,IAAK,SACL,IAAK,OACJ,GAAIC,GAAcC,SAASC,eAAef,KAAKK,cAAgBK,EAAOE,KACtE,IAAII,GAA4BF,SAASG,uBAAuB,0BAA4BP,EAAOQ,GACnG,IAAIC,GAAQT,EAAOS,OAAS,IAC5B,KAAIA,GAASH,GAA6BA,EAA0BI,OAAS,EAC7E,CACCD,IACA,KAAI,GAAIE,GAAI,EAAGA,EAAIL,EAA0BI,OAAQC,IACrD,CACCF,EAAMG,KAAKN,EAA0BO,KAAKF,SAGvC,KAAIF,GAASN,EAClB,CACCM,EAAQN,EAAYW,mBAGrB,GAAGL,GAASM,OAAOC,UAAUC,SAASC,KAAKT,IAAU,iBACrD,CACCA,GAASA,GAGV,GAAIU,GAAenB,CACnB,IAAGV,KAAK8B,cAAcpB,GACtB,CACCmB,EAAe7B,KAAKE,MAAMF,KAAK+B,gBAAgBrB,IAEhDS,EAAMX,QAAQ,SAASwB,GACtB,GAAIrB,GAAQX,IACZA,MAAKiC,iBAAiBD,EAAY,QAAS,WAAWrB,EAAMuB,UAAUL,MACpE7B,KACH,MACD,KAAK,QACJM,OAAO6B,WACN,WAAWxB,EAAMuB,UAAUxB,IAC3B,KAAQA,EAAO0B,MAAQ1B,EAAO0B,MAAQ,GAEvC,MACD,KAAK,SACL,QACCpC,KAAKqC,KAAK3B,EACV,SAGH4B,YAAa,SAAS5B,GAErB,GAAGV,KAAK8B,cAAcpB,GACrB,MAED,IAAIC,GAAQX,IACZ,IAAIuC,GAAQzB,SAAS0B,cAAc,MAEnCD,GAAME,UAAY,GACjB,2LACC,+dACC,2FACC,8KACC,0IACD,SACD,SACA,sHACD,SACD,QACDF,GAAQA,EAAMG,SAAS,EACvB,IAAIC,GAAOJ,EAAMK,cAAc,4BAC/B,IAAIC,GAAMN,EAAMK,cAAc,6BAC9B5C,MAAKiC,iBAAiBM,EAAO,QAAS,WAAW5B,EAAMmC,UAAUpC,IACjEV,MAAKiC,iBAAiBY,EAAK,QAAS,WAAWlC,EAAMmC,UAAUpC,IAC/D,IAAGI,SAASiC,KAAKL,SAAS,GAC1B,CACC5B,SAASiC,KAAKC,aAAaT,EAAOzB,SAASiC,KAAKL,SAAS,QAG1D,CACC5B,SAASiC,KAAKE,YAAYV,GAI3B,GAAIW,GAAepC,SAAS0B,cAAc,QAC1CU,GAAaC,aAAa,OAAQ,WAClCD,GAAaD,YAAYnC,SAASsC,eACjC,8DACE,gBACA,kBACA,qCACA,KAEHtC,UAASuC,KAAKJ,YAAYC,EAE1BxC,GAAO6B,MAAQA,CACf7B,GAAOiC,KAAOA,CAEd3C,MAAKiC,iBAAiB3B,OAAQ,SAAU,WACvCK,EAAM2C,YAAY5C,IAInBV,MAAKuD,gBAAgB7C,EAAQ,WAAY,SAAU8C,EAAMC,GACxD,GAAIA,GAAW,GAAI9C,EAAMmC,UAAUU,IAIpCxD,MAAKiC,iBAAiBnB,SAAU,QAAS,SAAU4C,GAClDA,EAAIA,GAAKpD,OAAOoD,CAChB,IAAIC,SAAaD,GAAEE,OAAS,SAAYF,EAAEE,MAAQF,EAAED,OACpD,IAAIE,GAAM,GACV,CACChD,EAAMmC,UAAUpC,OAInB4C,YAAa,SAASE,GAErB,IAAIA,IAASA,EAAK,WAAaA,EAAK,QACpC,CACC,OAGD,GAAIK,GAAiB,GACrB,IAAIC,GAAeC,KAAKC,IACvBlD,SAASiC,KAAKkB,aAAcnD,SAASoD,gBAAgBD,aACrDnD,SAASiC,KAAKoB,aAAcrD,SAASoD,gBAAgBC,aACrDrD,SAASiC,KAAKqB,aAActD,SAASoD,gBAAgBE,aAGtD,IAAIC,GAAcP,EAAeD,CACjC,IAAIS,GAAaD,GAAeb,EAAKpD,WAErC,IAAGkE,EACH,CACCd,EAAKb,KAAK4B,MAAM,cAAgB,QAChCf,GAAKb,KAAK4B,MAAM,UAAYF,EAAc,SAG3C,CACCb,EAAKb,KAAK4B,MAAM,cAAgB,QAChCf,GAAKb,KAAK4B,MAAMC,OAAS,KAG1B,GAAIC,GAAQV,KAAKC,IAChBlD,SAASiC,KAAK2B,YAAa5D,SAASoD,gBAAgBQ,YACpD5D,SAASiC,KAAK4B,YAAa7D,SAASoD,gBAAgBS,YACpD7D,SAASiC,KAAK6B,YAAa9D,SAASoD,gBAAgBU,YAErDH,IAAS,EAET,IAAGA,EAAQ,IAAKA,EAAQ,QACnB,IAAGA,EAAQ,IAAKA,EAAQ,GAC7BjB,GAAKb,KAAK4B,MAAM,aAAeE,EAAQ,MAExCvC,UAAW,SAASxB,GAEnB,IAAIA,EAAO6B,MACX,CACCvC,KAAKsC,YAAY5B,EACjBV,MAAKqC,KAAK3B,GAGX,GAAGA,EAAO6B,MACV,CACC,GAAGvC,KAAK6E,KAAKC,QAAS9E,KAAK6E,KAAKE,SAASjE,SAASoD,gBAAiB,yBACnExD,GAAO6B,MAAMgC,MAAMS,QAAU,UAG/BlC,UAAW,SAASpC,GAEnBA,EAAO6B,MAAMgC,MAAMS,QAAU,MAC7B,IAAGhF,KAAK6E,KAAKC,QAAS9E,KAAK6E,KAAKI,YAAYnE,SAASoD,gBAAiB,2BAEvEW,MACCE,SAAU,SAASG,EAASC,GAE3B,GAAID,SAAkBA,GAAQC,WAAa,UAAYD,EAAQC,UAAUC,QAAQD,MAAgB,EACjG,CACCD,EAAQC,WAAa,IAAMA,CAC3BD,GAAQC,UAAYD,EAAQC,UAAUE,QAAQ,KAAM,OAGtDJ,YAAa,SAASC,EAASC,GAE9B,IAAKD,IAAYA,EAAQC,UACzB,CACC,OAGDD,EAAQC,UAAYD,EAAQC,UAAUE,QAAQF,EAAW,IAAIE,QAAQ,KAAM,MAE5EC,SAAU,SAAS3C,EAAMwC,GAExB,GAAII,GAAYvF,KAAKwF,gBAAgB7C,EAAK4C,UAC1C,IAAIE,GAAWF,EAAUG,OAAO,SAAUC,GAAQ,MAAOA,IAAQR,GACjE,OAAOM,GAASrE,OAAS,GAE1B0D,MAAO,WAEN,MAAQ,qBAAqBc,KAAKC,UAAUC,YAE7CC,SAAU,WAET,MAAQ,sCAAsCH,KAAKC,UAAUC,aAG/DE,YAAa,SAAStF,GAErB,GAAIuF,GAAUvF,EAAOwF,MAASlG,KAAKmG,OAAS,eAC5CF,IAAWA,EAAQb,QAAQ,MAAQ,EAAI,IAAM,GAE7C,IAAIgB,GAAQtF,SAAS0B,cAAc,SACnC,IAAI6D,GAAY,kBAAoB3F,EAAOQ,EAC3C,IAAIoF,IACHH,OAAQ7F,OAAOiG,SAASC,SAAW,KAAOlG,OAAOiG,SAASE,KAC1DC,KAAMpG,OAAOiG,SAASI,KAEvB,IAAGjG,EAAOkG,OACV,CACCN,EAAaM,OAASlG,EAAOkG,OAE9B,GAAGlG,EAAOmG,QACV,CACCP,EAAaO,QAAUnG,EAAOmG,QAE/B,GAAGnG,EAAOoG,QACV,CACCR,EAAaQ,QAAUpG,EAAOoG,QAG/B,GAAIC,GAAWd,EAAU,cACxB,WAAavF,EAAOQ,GAAK,qBAAuBR,EAAOsG,KAAO,QAAUtG,EAAOuG,IAAM,MAAS,EAAE,GAAIC,MACpG,IAAMC,mBAAmBC,KAAKC,UAAUf,GAEzCF,GAAMjD,aAAa,KAAMkD,EACzBD,GAAMjD,aAAa,OAAQkD,EAC3BD,GAAMjD,aAAa,MAAO4D,EAE1BX,GAAMjD,aAAa,YAAa,KAChCiD,GAAMjD,aAAa,cAAe,IAClCiD,GAAMjD,aAAa,eAAgB,IACnCiD,GAAMjD,aAAa,cAAe,IAClCiD,GAAMjD,aAAa,QAAS,wBAA0BnD,KAAKI,YAAc,4DAEzE,OAAOgG,IAERrE,gBAAiB,SAASrB,GAEzB,GAAIE,GAAOF,EAAOE,IAClB,QAAOA,GAEN,IAAK,QACL,IAAK,SACL,IAAK,OACJA,EAAO,QACP,OAGF,MAAOA,GAAO,IAAMF,EAAOQ,IAE5BY,cAAe,SAASpB,GAEvB,QAASV,KAAKE,MAAMF,KAAK+B,gBAAgBrB,KAE1C2B,KAAM,SAAS3B,GAEd,GAAGV,KAAK8B,cAAcpB,GACrB,MAEDA,GAAO4G,SAAW5G,EAAO4G,YAEzBtH,MAAKuH,iBAAiB7G,EAAQ,QAASA,GAEvC,IAAI8G,GAAexH,KAAK+B,gBAAgBrB,EACxCV,MAAKE,MAAMsH,GAAgB9G,CAC3B,IAAIiC,GAAOjC,EAAOiC,KAAOjC,EAAOiC,KAAO,IACvC,IAAI9B,GAAcC,SAASC,eAAef,KAAKK,cAAgBK,EAAOE,KACtE,KAAI+B,IAAS9B,EACZ,MAEDb,MAAKmG,OAASzF,EAAO+G,IAAIC,MAAM,gCAAgC,EAE/D,IAAIC,GAAS3H,KAAKgG,YAAYtF,EAC9BA,GAAOiH,OAASA,CAEhB,IAAGhF,EACFA,EAAKM,YAAY0E,OAEjB9G,GAAY+G,WAAW5E,aAAa2E,EAAQ9G,EAE7C,IAAIF,GAAQX,IACZA,MAAKiC,iBAAiB0F,EAAQ,OAAQ,WAAWhH,EAAMkH,YAAYL,IACnExH,MAAKiC,iBAAiB3B,OAAQ,UAAW,SAASwH,GACjD,GAAGA,GAASA,EAAMC,QAAUpH,EAAMwF,OAClC,CACCxF,EAAMqH,cAAcF,EAAMG,UAI7BC,OAAQ,SAASxH,GAEhB,IAAIV,KAAK8B,cAAcpB,GACtB,MAEDV,MAAKuH,iBAAiB7G,EAAQ,UAAWA,GAEzC,IAAI8G,GAAexH,KAAK+B,gBAAgBrB,EACxC,IAAIiH,GAAS3H,KAAKE,MAAMsH,GAAcG,MACtC,IAAIA,GAAU,MAAQA,EAAOC,WAC5BD,EAAOC,WAAWO,YAAYR,EAE/B3H,MAAKE,MAAMsH,GAAgB,MAE5BQ,cAAe,SAASI,EAAYZ,GAEnC,GAAIS,KACJ,KAAMA,EAAOb,KAAKiB,MAAMD,GAAe,MAAOE,IAC9C,IAAIL,EAAKM,SAAWN,EAAKO,MAAO,MAEhC,QAAQP,EAAKM,QAEZ,IAAK,gBACJvI,KAAKyI,eAAeR,EAAKT,cAAgBA,EAAckB,SAAST,EAAKO,OACrE,MACD,KAAK,WACJlI,OAAOiG,SAAW0B,EAAKO,KACvB,MACD,KAAK,WACJ,GAAIP,EAAKO,OAAS,GAClB,CACC,GAAIhF,GAAOxD,KAAKE,MAAM+H,EAAKT,cAAgBA,EAC3C,IAAGhE,EAAMxD,KAAKuH,iBAAiB/D,EAAM,YAAaA,EAAMyE,EAAKO,QAE9D,KACD,KAAK,QACJ,GAAIhF,GAAOxD,KAAKE,MAAM+H,EAAKT,cAAgBA,EAC3C,IAAGhE,EAAMxD,KAAKuH,iBAAiB/D,EAAMyE,EAAKU,UAAWV,EAAKO,MAC1D,MACD,KAAK,YACJP,EAAKO,MAAMhI,QAAQ,SAASe,GAC3B,GAAIA,EAAKX,MAAQ,MAAQN,OAAOsI,UAChC,CACC,GAAIrH,EAAKb,OAAO,IAAM,WACtB,CACCJ,OAAOsI,UAAUtH,MAChBwG,MAAS,kBAETe,eAAkBtH,EAAKb,OAAO,SAG3B,IAAIa,EAAKb,OAAO,IAAM,QAC3B,CACCJ,OAAOsI,UAAUtH,MAChBwG,MAAS,WACTgB,cAAiBvH,EAAKb,OAAO,GAC7BqI,YAAexH,EAAKb,OAAO,UAIzB,IAAIa,EAAKX,MAAQ,MAAQN,OAAO0I,GACrC,CACC,GAAIC,GAAa3I,OAAO0I,GAAGE,SAASxD,OAAO,SAASyD,GACnD,MAAOA,GAAQC,IAAI,eAAiB7H,EAAK8H,OACvCjI,OAAS,CACZ,KAAKG,EAAK8H,OAASJ,EACnB,CACC,GAAI1H,EAAKb,OAAO,GACfJ,OAAO0I,GAAG,OAAQzH,EAAKb,OAAO,GAAIa,EAAKb,OAAO,GAAIa,EAAKb,OAAO,QAE9DJ,QAAO0I,GAAG,OAAQzH,EAAKb,OAAO,GAAIa,EAAKb,OAAO,SAG5C,IAAIa,EAAKX,MAAQ,OAASN,OAAO,YAAciB,EAAKtB,MACzD,CACC,IAAKD,KAAKC,KACV,CACC,GAAIK,OAAO,OAASgJ,GAAGC,SAAWD,GAAGC,QAAQC,WAAW,GACxD,CACCxJ,KAAKC,KAAOqJ,GAAGC,QAAQC,WAAW,GAAGtI,IAIvC,GAAIlB,KAAKC,KACT,CACCK,OAAO,YAAcN,KAAKC,MAAMwJ,UAAUlI,EAAKb,OAAO,OAIzD,SAGHgJ,UAAW,SAASlC,GAEnB,GAAIY,GAAa9H,OAAOiG,SAASoD,KAAKC,UAAU,EAChD5J,MAAKgI,cAAcI,EAAYZ,EAE/B,IAAI7G,GAAQX,IACZmC,YAAW,WAAWxB,EAAM+I,UAAUlC,IAAgB,MAEvDK,YAAa,SAASL,GAErB,GAAIhE,GAAOxD,KAAKE,MAAMsH,EAEtB,IAAIqC,GAAK,CACT,UAAUvJ,QAAOwJ,cAAgB,aAAeD,EAChD,CACC,GAAIE,IACH5D,OAAUnG,KAAKmG,OACfqB,aAAgBA,EAEjBxH,MAAKuH,iBAAiB/D,EAAM,qBAAsBA,EAAMuG,GAExDvG,GAAKmE,OAAOqC,cAAcF,YACzB1C,KAAKC,UAAU0C,GAAkB/J,KAAKmG,YAIxC,CACCnG,KAAK0J,UAAUlC,GAGhBxH,KAAKuH,iBAAiB/D,EAAM,QAASA,KAGtCvB,iBAAkB,SAASgI,EAAItB,EAAWuB,GAEzCD,EAAKA,GAAM3J,MACX,IAAIA,OAAO2B,iBACX,CACCgI,EAAGhI,iBAAiB0G,EAAWuB,EAAS,WAGzC,CACCD,EAAGE,YAAY,KAAOxB,EAAWuB,KAGnC3G,gBAAiB,SAAS6G,EAAQzB,EAAWuB,GAE5C,IAAKvB,IAAcuB,EACnB,CACC,OAGDlK,KAAKG,cAAcmB,MAClB8I,OAAUA,EACVzB,UAAaA,EACbuB,QAAWA,KAGb3C,iBAAkB,SAAS6C,EAAQzB,EAAWjI,GAE7CA,EAASA,KACT,KAAKiI,EACL,CACC,OAGD3I,KAAKG,cAAcK,QAAQ,SAAU6J,GACpC,GAAIA,EAAa1B,WAAaA,EAC9B,CACC,OAED,GAAI0B,EAAaD,QAAUA,EAC3B,CACC,OAGDC,EAAaH,QAAQI,MAAMtK,KAAMU,IAC/BV,KAEH,IAAGoK,GAAUpK,KACb,MAIA,CACC,GAAGoK,EAAO9C,UAAY8C,EAAO9C,SAASqB,GACtC,CACCyB,EAAO9C,SAASqB,GAAW2B,MAAMtK,KAAMU,MAK1C+H,eAAgB,SAASjB,EAAchD,GAEtC,GAAIhB,GAAOxD,KAAKE,MAAMsH,EACtB,KAAIhE,EACJ,CACC,OAGD,GAAGA,EAAK,gBAAkBA,EAAKpD,aAAeoE,EAAQ,MAEtDhB,GAAKpD,YAAcoE,CACnBhB,GAAKmE,OAAOpD,MAAM,UAAYC,EAAS,IAEvC,IAAGhB,EAAKjB,MACR,CACCvC,KAAKsD,YAAYE,KAKpB1D,oBAAmBC"}