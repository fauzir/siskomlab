{"version":3,"file":"visit.min.js","sources":["visit.js"],"names":["configCamera","AJAX_URL","BX","message","COMMUNICATIONS_AJAX_URL","bitrix_sessid","crmSelectorLoaded","consentGiven","recognizeConsentGiven","callbacks","onVisitCreated","nop","CrmActivityVisit","config","self","this","type","isPlainObject","buttons","createLead","createContact","selectEntity","addDeal","addInvoice","owner","id","createdDeals","createdInvoices","Math","round","random","ajaxUrl","recorder","mainNode","popup","hasFaceId","hasConsent","HAS_CONSENT","hasRecognizeConsent","HAS_RECOGNIZE_CONSENT","faceIdInstalled","FACEID_INSTALLED","hasPhoto","faceId","communicationSearch","faceSearch","recordLength","timestamp","Date","getTime","timerInterval","externalRequests","_externalEventHandler","_onExternalEvent","bind","_selectEntityHandler","_onSelectEntity","createTimestamp","entityType","OWNER_TYPE","entityId","OWNER_ID","failed","vkProfile","vkProfileChanged","init","create","prototype","addCustomEvent","window","getId","setId","getMainNode","setMainNode","getPopup","setPopup","getNode","name","scope","querySelector","getNodeValue","node","value","showEdit","params","ajax_action","_checkConsent","_checkRecognizeConsent","_createAjaxPopup","linksContainer","removeClass","dealId","parseInt","push","addEventListener","_onCreateButtonClick","_onSelectorButtonClick","_onAddButtonClick","recorderNode","finishButton","_onFinishButtonClick","CrmRecorder","isSupported","element","_onRecorderDeviceFailure","_onRecorderDeviceReady","start","setInterval","oldTimestamp","newTimestamp","difference","_updateTimer","addClass","faceidNode","FaceSearch","visitView","onSelect","_onFaceSelected","onReset","_onFaceReset","onSocialProfileSelected","_onFaceSocialProfileSelected","style","minWidth","profileNode","isNotEmptyString","setVkProfile","setTimeout","adjustPosition","saveActivity","next","finishLoader","clearInterval","stop","record","formData","FormData","append","getImageBlob","savePhoto","ajax","method","dataType","url","data","preparePost","onsuccess","response","onprogress","p","dispose","removeCustomEvent","obCrm","visitCrmSelector","RemoveOnSaveListener","content","PopupWindow","titleBar","closeIcon","closeByEsc","events","onPopupClose","destroy","PopupWindowButton","text","className","click","userOptions","save","close","PopupWindowButtonLink","show","max-width","html","_saveRecognizeConsent","sessid","wrapper","min-width","height","noAllPaddings","zIndex","draggable","restrict","overlay","backgroundColor","opacity","_onPopupClose","HTML","innerHTML","setOwner","entity","_reloadOwnerCard","selectorContainer","__renderSavePhoto","e","target","dataset","context","open","key","entityTypeName","isCanceled","isBoolean","entityInfo","role","util","add_url_param","contact_id","company_id","contact","company","runCallback","requestData","ENTITY_TYPE","ENTITY_ID","cardContainer","lengthElement","minutes","floor","toString","seconds","length","String","concat","innerText","_openCrmSelector","Open","AddOnSaveListener","found","lead","hasOwnProperty","substr","profile","error","timerNode","errorNode","setCallback","eventName","callback","isFunction","event","CommunicationSearch","communicationType","CrmCommunicationType","undefined","entityTitle","callBacks","setEntity","CrmCommunicationSearch","messages","SearchTab","NoData","selectNode","inputNode","openDialog","PreventDefault","_communicationSearch","serviceUrl","selectCallback","delegate","selectCommunication","enableSearch","enableDataLoading","dialogAutoHide","_communicationSearchController","titleNode","CrmCommunicationSearchController","onCloseDialog","defer","focus","result","getSettings","closeDialog","mediaStream","defaulCamera","__getDefaultCamera","state","cameraList","imageBlob","elements","loader","social","picture","settings","seachSocial","settingsMenu","socialSelector","__bindEvents","hide","setImageBlob","__getMediaStream","changeCamera","cameraId","__setDefaultCamera","stopMediaStream","__onSearchButtonClick","__onSettingsButtonClick","__onSearchSocialButtonClick","__onSavePhotoButtonClick","navigator","mediaDevices","getUserMedia","__getConstraints","then","stream","videoNode","volume","src","URL","createObjectURL","play","__getCameraList","catch","console","log","audio","video","browser","IsChrome","mandatory","sourceId","deviceId","exact","enumerateDevices","deviceList","forEach","deviceInfo","kind","label","localStorage","getItem","setItem","pictureContainer","videoContainer","createPicture","__setState","__showLoader","searchFace","__hideLoader","ERRORS","SUCCESS","DATA","ENTITY_TITLE","FACE_ID","alert","menuItems","popupWindow","cameraInfo","menuItem","onclick","PopupMenu","autoHide","offsetTop","offsetLeft","offsetWidth","angle","position","onPopupDestroy","SocialSelector","__onSocialProfileSelected","onDispose","__onSocialSelectorClosed","newState","pictureButton","canvas","getContext","width","videoWidth","videoHeight","drawImage","toBlob","profileContainer","profileLink","searchButton","htmlspecialchars","href","_bindEvents","selectButtons","document","querySelectorAll","i","item","_onSelectButtonClick","OnPopupClose","OnPopupDestroy","startSearch","MediaStream","getTracks","track"],"mappings":"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"}